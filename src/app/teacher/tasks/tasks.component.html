<div class="task-manager">
  <!-- Header Section -->
  <div class="header">
    <!-- <div class="header-content">
      <div class="icon-wrapper">
        <i class="fas fa-tasks"></i>
      </div>
      <h1>Task Manager</h1>
      <p>Organize your day with style</p>
    </div>
  </div> -->

  <!-- Main Content Grid -->
  <div class="main-grid">
    <!-- Task Form Card -->
    <div class="form-section">
      <div class="glass-card form-card">
        <div class="card-header">
          <h2><fa-icon [icon]="faAdd"></fa-icon> Create New Task</h2>
          <div class="header-decoration"></div>
        </div>
        
        <form [formGroup]="taskForm" (ngSubmit)="onSubmit()" class="task-form">
          <!-- Title Field -->
          <div class="form-group" [class.error]="isFieldInvalid('title')">
            <div class="input-wrapper">
              <i class="fas fa-heading input-icon"></i>
              <input 
                type="text" 
                id="title" 
                formControlName="title" 
                placeholder=" "
                class="form-input">
              <label for="title" class="form-label">Task Title</label>
              <div class="input-border"></div>
            </div>
            <div class="error-message" *ngIf="isFieldInvalid('title')">
              <i class="fas fa-exclamation-circle"></i>
              {{ getErrorMessage('title') }}
            </div>
          </div>

          <!-- Date and Time Row -->
          <div class="form-row">
            <!-- Date Field -->
            <div class="form-group half-width" [class.error]="isFieldInvalid('date')">
              <div class="input-wrapper">
                <fa-icon [icon]="faCalendarAlt" class="input-icon"></fa-icon>
                <input 
                  type="date" 
                  id="date" 
                  formControlName="date" 
                  class="form-input">
                <label for="date" class="form-label">Date</label>
                <div class="input-border"></div>
              </div>
              <div class="error-message" *ngIf="isFieldInvalid('date')">
                <fa-icon [icon]="faExclamationCircle"></fa-icon>
                {{ getErrorMessage('date') }}
              </div>
            </div>
          </div>

          <!-- Time Row -->
          <div class="form-row">
            <!-- Start Time -->
            <div class="form-group half-width" [class.error]="isFieldInvalid('startTime')">
              <div class="input-wrapper">
                <fa-icon [icon]="faClock" class="input-icon"></fa-icon>
                <input 
                  type="time" 
                  id="startTime" 
                  formControlName="startTime" 
                  class="form-input">
                <label for="startTime" class="form-label">Start Time</label>
                <div class="input-border"></div>
              </div>
              <div class="error-message" *ngIf="isFieldInvalid('startTime')">
                <fa-icon [icon]="faExclamationCircle"></fa-icon>
                {{ getErrorMessage('startTime') }}
              </div>
            </div>

            <!-- End Time -->
            <div class="form-group half-width" [class.error]="isFieldInvalid('endTime')">
              <div class="input-wrapper">
                <i class="fas fa-clock input-icon"></i>
                <input 
                  type="time" 
                  id="endTime" 
                  formControlName="endTime" 
                  class="form-input">
                <label for="endTime" class="form-label">End Time</label>
                <div class="input-border"></div>
              </div>
              <div class="error-message" *ngIf="isFieldInvalid('endTime')">
                <i class="fas fa-exclamation-circle"></i>
                {{ getErrorMessage('endTime') }}
              </div>
            </div>
          </div>

          <!-- Time Validation Error -->
          <div class="error-message global-error" *ngIf="taskForm.hasError('timeError')">
            <i class="fas fa-exclamation-triangle"></i>
            End time must be after start time
          </div>

          <!-- Description Field -->
          <div class="form-group" [class.error]="isFieldInvalid('description')">
            <div class="input-wrapper">
              <i class="fas fa-align-left input-icon"></i>
              <textarea 
                id="description" 
                formControlName="description" 
                placeholder=" "
                rows="4"
                class="form-input form-textarea"></textarea>
              <label for="description" class="form-label">Description</label>
              <div class="input-border"></div>
            </div>
            <div class="error-message" *ngIf="isFieldInvalid('description')">
              <i class="fas fa-exclamation-circle"></i>
              {{ getErrorMessage('description') }}
            </div>
          </div>

          <!-- Submit Button -->
          <button 
            type="submit" 
            class="submit-btn"
            [class.loading]="isSubmitting"
            [disabled]="!taskForm.valid || isSubmitting">
            <span class="btn-content" *ngIf="!isSubmitting">
              <fa-icon [icon]="faAdd"></fa-icon>
              Add Task
            </span>
            <span class="btn-content" *ngIf="isSubmitting">
              <fa-icon [icon]="faSort" [spin]="true"></fa-icon>
              Adding...
            </span>
            <div class="btn-ripple"></div>
          </button>
        </form>
      </div>
    </div>

    <!-- Task List Section -->
    <div class="list-section">
      <div class="glass-card list-card">
        <div class="card-header">
          <h2><fa-icon [icon]="faList"></fa-icon> All Tasks</h2>
          <div class="header-decoration"></div>
        </div>
        <div class="tasks-container">
          <div *ngIf="getFilteredTasks().length === 0" class="empty-state">
            <div class="empty-icon">üóíÔ∏è</div>
            <div class="empty-title">{{ getEmptyStateTitle() }}</div>
            <div class="empty-message">{{ getEmptyStateMessage() }}</div>
          </div>
          <div *ngFor="let task of getFilteredTasks(); trackBy: trackByTask" 
               class="task-item" 
               [class.completed]="task.completed"
               [@taskAnimation]>
            <div class="task-content">
              <div class="task-header">
                <span class="task-title">{{ task.title }}</span>
                <span class="day-badge">{{ task.day }}</span>
                <span *ngIf="task.completed" class="task-status"><fa-icon [icon]="faCheckCircle"></fa-icon></span>
              </div>
              <div class="task-description">{{ task.description }}</div>
              <div class="task-details">
                <span class="detail-item">
                  <fa-icon [icon]="faCalendarAlt"></fa-icon> {{ task.date }}
                </span>
                <span class="detail-item">
                  <fa-icon [icon]="faClock"></fa-icon> {{ task.startTime }} - {{ task.endTime }}
                </span>
                <span class="detail-item duration">
                  <fa-icon [icon]="faClock"></fa-icon> {{ calculateDuration(task.startTime, task.endTime) }}
                </span>
              </div>
            </div>
            <div class="task-actions">
              <button class="action-btn complete-btn" 
                      [class.completed]="task.completed"
                      (click)="toggleTask(getOriginalIndex(task))"
                      [title]="task.completed ? 'Mark as Pending' : 'Mark as Completed'">
                <fa-icon [icon]="faCheckCircle"></fa-icon>
              </button>
              <button class="action-btn edit-btn" 
                      (click)="editTask(getOriginalIndex(task))"
                      title="Edit Task">
                <fa-icon [icon]="faEdit"></fa-icon>
              </button>
              <button class="action-btn delete-btn" 
                      (click)="deleteTask(task)"
                      title="Delete Task">
                <fa-icon [icon]="faTrashAlt"></fa-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Task List Section -->
  </div>
  
  <!-- Success Message -->
  <div class="toast" [class.show]="showToast" [@slideUp]>
    <div class="toast-content">
      <i class="fas fa-check-circle"></i>
      {{ toastMessage }}
    </div>
  </div>


</div>